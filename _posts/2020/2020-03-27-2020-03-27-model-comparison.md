---
layout: post
published: true
---

---
# Fri Mar 27 08:40:19 MDT 2020: Research notes

Added multiprocessing to the data generator on Casper.

Running models with two different sets of data and the same model architecture.

Model architecture is a unet-type with only 3 downsampling layers and batch norm after each
convolution. Approximately 1M params.

One model is running on Casper and one on my computer. The Casper one is fitting surface reflectance
data over Montana for 2013 with images from may to october. There is also offline data augmentation
(no online augmentation) for the Casper model in the form of irrigated data being extracted over
centroids of each irrigated polygon as well as extraction through a raster scan.  My local one is
also using surf.  reflectance data over Montana from 2013, but the images are from March-April to
December (full year). There is no data augmentation (offline or online) for the model using
full-year data.

Learning rate schedule for full-year model:
Full year comprises of 13 stacked rgb images. 
```python
def lr_schedule(epoch):
    lr = 1e-3
    rlr = 1e-3
    if epoch > 50:
        rlr = lr / 2
    if epoch > 100:
        rlr = lr / 4
    if epoch > 150:
        rlr = lr / 6
    if epoch > 200:
        rlr = lr / 8
    if epoch > 250:
        rlr = lr / 16
    return rlr
```

For partial-year and offline data augmentation:
Partial year comprises of 9 stacked rgb images.

```python
def lr_schedule(epoch):
    lr = 1e-3
    rlr = 1e-3
    if epoch > 100:
        rlr = lr / 2
    if epoch > 200:
        rlr = lr / 4
    if epoch > 350:
        rlr = lr / 6
    if epoch > 400:
        rlr = lr / 8
    if epoch > 450:
        rlr = lr / 16
    if epoch > 500:
        rlr = lr / 32
    return rlr
```
